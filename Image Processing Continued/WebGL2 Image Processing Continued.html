<!DOCTYPE html>
<!-- saved from url=(0082)https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

  <meta name="description" content="How to apply multiple image processing techniques to images in WebGL">
  <meta name="keywords" content="webgl webgl2 graphics">
  <meta name="thumbnail"
    content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_en.jpg">

  <meta property="og:title" content="WebGL2 Image Processing Continued">
  <meta property="og:type" content="website">
  <meta property="og:image"
    content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_en.jpg">
  <meta property="og:description" content="How to apply multiple image processing techniques to images in WebGL">
  <meta property="og:url" content="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@greggman">
  <meta name="twitter:creator" content="@greggman">
  <meta name="twitter:domain" content="webgl2fundamentals.org">
  <meta name="twitter:title" content="WebGL2 Image Processing Continued">
  <meta name="twitter:url" content="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html">
  <meta name="twitter:description" content="How to apply multiple image processing techniques to images in WebGL">
  <meta name="twitter:image:src"
    content="https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_en.jpg">

  <script async="" src="./WebGL2 Image Processing Continued_files/analytics.js.下载"></script>
  <script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webgl2fundamentals.org/#website",
      "url":"https://webgl2fundamentals.org/",
      "name":"Webgl2Fundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html#primaryimage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/screenshots/webgl-image-processing-continued_en.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html#webpage",
      "url":"https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html",
      "inLanguage":"en",
      "name":"WebGL2 Image Processing Continued",
      "keywords":"webgl webgl2 graphics programming",
      "isPartOf":{
        "@id":"https://webgl2fundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html#primaryimage"
      }
    }
  ]
}
</script>


  <title>WebGL2 Image Processing Continued</title>
  <link href="https://webgl2fundamentals.org/webgl/lessons/resources/webgl2fundamentals-icon.png" rel="shortcut icon"
    type="image/png">
  <link rel="stylesheet" href="./WebGL2 Image Processing Continued_files/lang.css">
  <link rel="stylesheet" href="./WebGL2 Image Processing Continued_files/lesson.css">

  <link rel="alternate" hreflang="en"
    href="https://webglfundamentals.org/webgl/lessons/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="de"
    href="https://webglfundamentals.org/webgl/lessons/de/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="ja"
    href="https://webglfundamentals.org/webgl/lessons/ja/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="ko"
    href="https://webglfundamentals.org/webgl/lessons/ko/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="pt-br"
    href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-image-processing-continued.html">
  <link rel="alternate" hreflang="zh_cn"
    href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-image-processing-continued.html">




  <script type="text/javascript" async="" src="https://webgl2fundamentals.disqus.com/embed.js"></script>
</head>

<body>
  <div class="webgl_navbar">
    <div>
      <select class="language">
        <option value="/webgl/lessons/webgl-image-processing-continued.html" selected="">English
        </option>
        <option value="/webgl/lessons/de/webgl-image-processing-continued.html">Deutsch
        </option>
        <option value="/webgl/lessons/ja/webgl-image-processing-continued.html">日本語
        </option>
        <option value="/webgl/lessons/ko/webgl-image-processing-continued.html">한국어
        </option>
        <option value="/webgl/lessons/pt-br/webgl-image-processing-continued.html">Português Brasileiro
        </option>
        <option value="/webgl/lessons/zh_cn/webgl-image-processing-continued.html">简体中文
        </option>
      </select>


      <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html#toc">Table of
        Contents</a>
    </div>
  </div>
  <div class="webgl_header">
    <h1><a href="https://webgl2fundamentals.org/">WebGL2Fundamentals.org</a></h1>
    <style>
      #forkongithub>div {
        background: #000;
        color: #fff;
        font-family: arial, sans-serif;
        text-align: center;
        font-weight: bold;
        padding: 5px 40px;
        font-size: 0.9rem;
        line-height: 1.3rem;
        position: relative;
        transition: 0.5s;
        display: block;
        width: 400px;
        position: absolute;
        top: 0;
        right: 0;
        transform: translateX(200px) rotate(45deg) translate(10px, 70px);
        box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.8);
        pointer-events: auto;
      }

      #forkongithub a {
        text-decoration: none;
        color: #fff;
      }

      #forkongithub>div:hover {
        background: #c11;
        color: #fff;
      }

      #forkongithub .contributors {
        font-size: 0.75rem;
        background: rgba(255, 255, 255, 0.2);
        line-height: 1.2;
        padding: 0.1em;
      }

      #forkongithub>div::before,
      #forkongithub>div::after {
        content: "";
        width: 100%;
        display: block;
        position: absolute;
        top: 1px;
        left: 0;
        height: 1px;
        background: #fff;
      }

      #forkongithub>div::after {
        bottom: 1px;
        top: auto;
      }

      #forkongithub {
        z-index: 9999;
        /* needed for firefox */
        overflow: hidden;
        width: 300px;
        height: 300px;
        position: absolute;
        right: 0;
        top: 0;
        pointer-events: none;
      }

      #forkongithub svg {
        width: 1em;
        height: 1em;
        vertical-align: middle;
      }

      #forkongithub img {
        width: 1em;
        height: 1em;
        border-radius: 100%;
        vertical-align: middle;
      }

      @media (max-width: 900px) {
        #forkongithub>div {
          line-height: 1.2rem;
        }
      }

      @media (max-width: 700px) {
        #forkongithub {
          display: none;
        }
      }

      @media (max-width: 410px) {
        #forkongithub>div {
          font-size: 0.7rem;
          transform: translateX(150px) rotate(45deg) translate(20px, 40px);
        }
      }
    </style>
    <div id="forkongithub">
      <div>
        <div><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">Fix, Fork, Contribute
            <!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

            <svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
              style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
              <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
                <path
                  d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904"
                  style="fill:white;"></path>
              </g>
            </svg>
          </a></div>
        <div class="contributors">Thank you <a href="https://github.com/kbobrowski"><img
              src="./WebGL2 Image Processing Continued_files/28542783"> kbobrowski</a><br>for <a
            href="https://github.com/gfxfundamentals/webgl2-fundamentals/commits?author=kbobrowski">2 contributions</a>
        </div>
      </div>
    </div>

  </div>


  <div class="container">
    <div class="lesson-title">
      <h1>WebGL2 Image Processing Continued</h1>
    </div>
    <div class="lesson">
      <div class="lesson-main">
        <p>This article is a continuation of <a
            href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing.html">WebGL Image Processing</a>.
          If you haven't read that I suggest <a
            href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing.html">you start there</a>.</p>
        <p>The next most obvious question for image processing is how to apply multiple effects?</p>
        <p>图像处理的下一个最明显的问题是如何应用多重效果？</p>
        <p>Well, you could try to generate shaders on the fly. Provide a UI that lets the
          user select the effects he wants to use then generate a shader that does
          all of the effects. That might not always be possible though that technique
          is often used to <a href="https://www.youtube.com/watch?v=cQUn0Zeh-0Q">create effects for real time
            graphics</a>.</p>
        <p>好吧，您可以尝试动态生成着色器。 提供一个 UI，让用户选择他想要使用的效果，然后生成一个执行所有效果的着色器。 尽管该技术通常用于为实时图形创建效果，但这并不总是可行的。</p>
        <p>A more flexible way is to use 2 more <em>work</em> textures and
          render to each texture in turn, ping-ponging back and forth
          and applying the next effect each time.</p>
        <p>一种更灵活的方法是使用 2 个以上的工作纹理并依次渲染到每个纹理，来回乒乓并每次应用下一个效果。</p>
        <blockquote>
          <pre>Original Image -&gt; [Blur]        -&gt; Texture 1
Texture 1      -&gt; [Sharpen]     -&gt; Texture 2
Texture 2      -&gt; [Edge Detect] -&gt; Texture 1
Texture 1      -&gt; [Blur]        -&gt; Texture 2
Texture 2      -&gt; [Normal]      -&gt; Canvas</pre>
        </blockquote>

        <p>To do this we need to create framebuffers. In WebGL and OpenGL, a Framebuffer
          is actually a poor name. A WebGL/OpenGL Framebuffer is really just a
          list of attachments and not actually a buffer of any kind. But, by
          attaching a texture to a framebuffer we can render into that texture.</p>
        <p>为此，我们需要创建帧缓冲区。 在 WebGL 和 OpenGL 中，Framebuffer 实际上是一个糟糕的名字。 WebGL/OpenGL 帧缓冲区实际上只是一个附件列表，而不是任何类型的缓冲区。
          但是，通过将纹理附加到帧缓冲区，我们可以渲染到该纹理中。</p>
        <p>First let's turn <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing.html">the old
            texture creation code</a> into a function</p>
        <p>首先让我们把旧的纹理创建代码变成一个函数</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pln">  </span><span class="kwd">function</span><span class="pln"> createAndSetupTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> texture </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">createTexture</span><span class="pun">();</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">bindTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> texture</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Set up texture so we can render any size image and so we are</span></li><li class=""><span class="pln">    </span><span class="com">// working with pixels.</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">texParameteri</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TEXTURE_WRAP_S</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">CLAMP_TO_EDGE</span><span class="pun">);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">texParameteri</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TEXTURE_WRAP_T</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">CLAMP_TO_EDGE</span><span class="pun">);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">texParameteri</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TEXTURE_MIN_FILTER</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">NEAREST</span><span class="pun">);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">texParameteri</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TEXTURE_MAG_FILTER</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">NEAREST</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="kwd">return</span><span class="pln"> texture</span><span class="pun">;</span></li><li class=""><span class="pln">  </span><span class="pun">}</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="com">// Create a texture and put the image in it.</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> originalImageTexture </span><span class="pun">=</span><span class="pln"> createAndSetupTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="com">// Upload the image into the texture.</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> mipLevel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">               </span><span class="com">// the largest mip</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> internalFormat </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">RGBA</span><span class="pun">;</span><span class="pln">   </span><span class="com">// format we want in the texture</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> srcFormat </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">RGBA</span><span class="pun">;</span><span class="pln">        </span><span class="com">// format of data we are supplying</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> srcType </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">UNSIGNED_BYTE  </span><span class="com">// type of data we are supplying</span></li><li class=""><span class="pln">  gl</span><span class="pun">.</span><span class="pln">texImage2D</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span></li><li class=""><span class="pln">                mipLevel</span><span class="pun">,</span></li><li class=""><span class="pln">                internalFormat</span><span class="pun">,</span></li><li class=""><span class="pln">                srcFormat</span><span class="pun">,</span></li><li class=""><span class="pln">                srcType</span><span class="pun">,</span></li><li class=""><span class="pln">                image</span><span class="pun">);</span></li></ul></pre>
        <p>And now let's use that function to make 2 more textures and attach them to 2 framebuffers.</p>
        <p>现在让我们使用该函数制作另外 2 个纹理并将它们附加到 2 个帧缓冲区。</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pln">  </span><span class="com">// create 2 textures and attach them to framebuffers.</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> textures </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> framebuffers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span></li><li class=""><span class="pln">  </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> ii </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">ii</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> texture </span><span class="pun">=</span><span class="pln"> createAndSetupTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">);</span></li><li class=""><span class="pln">    textures</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">texture</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// make the texture the same size as the image</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> mipLevel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">               </span><span class="com">// the largest mip</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> internalFormat </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">RGBA</span><span class="pun">;</span><span class="pln">   </span><span class="com">// format we want in the texture</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> border </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">                 </span><span class="com">// must be 0</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> srcFormat </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">RGBA</span><span class="pun">;</span><span class="pln">        </span><span class="com">// format of data we are supplying</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> srcType </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">UNSIGNED_BYTE  </span><span class="com">// type of data we are supplying</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">                </span><span class="com">// no data = create a blank texture</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">texImage2D</span><span class="pun">(</span></li><li class=""><span class="pln">        gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> mipLevel</span><span class="pun">,</span><span class="pln"> internalFormat</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">height</span><span class="pun">,</span><span class="pln"> border</span><span class="pun">,</span></li><li class=""><span class="pln">        srcFormat</span><span class="pun">,</span><span class="pln"> srcType</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Create a framebuffer</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> fbo </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">createFramebuffer</span><span class="pun">();</span></li><li class=""><span class="pln">    framebuffers</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">fbo</span><span class="pun">);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">bindFramebuffer</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">FRAMEBUFFER</span><span class="pun">,</span><span class="pln"> fbo</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Attach a texture to it.</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> attachmentPoint </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">COLOR_ATTACHMENT0</span><span class="pun">;</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">framebufferTexture2D</span><span class="pun">(</span></li><li class=""><span class="pln">        gl</span><span class="pun">.</span><span class="pln">FRAMEBUFFER</span><span class="pun">,</span><span class="pln"> attachmentPoint</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> texture</span><span class="pun">,</span><span class="pln"> mipLevel</span><span class="pun">);</span></li><li class=""><span class="pln">  </span><span class="pun">}</span></li></ul></pre>
        <p>Now let's make a set of kernels and then a list of them to apply.</p>
        <p>现在让我们制作一组内核，然后列出要应用的内核。</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pln">  </span><span class="com">// Define several convolution kernels</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> kernels </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    normal</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class=""><span class="pln">      </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span></li><li class=""><span class="pln">    </span><span class="pun">],</span></li><li class=""><span class="pln">    gaussianBlur</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class=""><span class="pln">      </span><span class="lit">0.045</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.122</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.045</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="lit">0.122</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.332</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.122</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="lit">0.045</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.122</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.045</span></li><li class=""><span class="pln">    </span><span class="pun">],</span></li><li class=""><span class="pln">    unsharpen</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class=""><span class="pln">      </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span></li><li class=""><span class="pln">      </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span></li><li class=""><span class="pln">    </span><span class="pun">],</span></li><li class=""><span class="pln">    emboss</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class=""><span class="pln">       </span><span class="pun">-</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="lit">0</span><span class="pun">,</span></li><li class=""><span class="pln">       </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1</span><span class="pun">,</span></li><li class=""><span class="pln">        </span><span class="lit">0</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="lit">2</span></li><li class=""><span class="pln">    </span><span class="pun">]</span></li><li class=""><span class="pln">  </span><span class="pun">};</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="com">// List of effects to apply.</span></li><li class=""><span class="pln">  </span><span class="kwd">var</span><span class="pln"> effectsToApply </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span></li><li class=""><span class="pln">    </span><span class="str">"gaussianBlur"</span><span class="pun">,</span></li><li class=""><span class="pln">    </span><span class="str">"emboss"</span><span class="pun">,</span></li><li class=""><span class="pln">    </span><span class="str">"gaussianBlur"</span><span class="pun">,</span></li><li class=""><span class="pln">    </span><span class="str">"unsharpen"</span></li><li class=""><span class="pln">  </span><span class="pun">];</span></li></ul></pre>
        <p>And finally let's apply each one, ping ponging which texture we are rendering too</p>
        <p>最后让我们应用每一个，ping ponging 我们正在渲染的纹理</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pln">  </span><span class="kwd">function</span><span class="pln"> drawEffects</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    </span><span class="com">// Tell it to use our program (pair of shaders)</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">useProgram</span><span class="pun">(</span><span class="pln">program</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Bind the attribute/buffer set we want.</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">bindVertexArray</span><span class="pun">(</span><span class="pln">vao</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// start with the original image on unit 0</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">activeTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE0 </span><span class="pun">+</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">bindTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> originalImageTexture</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Tell the shader to get the texture from texture unit 0</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform1i</span><span class="pun">(</span><span class="pln">imageLocation</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// don't y flip images while drawing to the textures</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform1f</span><span class="pun">(</span><span class="pln">flipYLocation</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// loop through each effect we want to apply.</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class=""><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> ii </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> ii </span><span class="pun">&lt;</span><span class="pln"> tbody</span><span class="pun">.</span><span class="pln">rows</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">ii</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">      </span><span class="kwd">var</span><span class="pln"> checkbox </span><span class="pun">=</span><span class="pln"> tbody</span><span class="pun">.</span><span class="pln">rows</span><span class="pun">[</span><span class="pln">ii</span><span class="pun">].</span><span class="pln">firstChild</span><span class="pun">.</span><span class="pln">firstChild</span><span class="pun">;</span></li><li class=""><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">checkbox</span><span class="pun">.</span><span class="kwd">checked</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">        </span><span class="com">// Setup to draw into one of the framebuffers.</span></li><li class=""><span class="pln">        setFramebuffer</span><span class="pun">(</span><span class="pln">framebuffers</span><span class="pun">[</span><span class="pln">count </span><span class="pun">%</span><span class="pln"> </span><span class="lit">2</span><span class="pun">],</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">height</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">        drawWithKernel</span><span class="pun">(</span><span class="pln">checkbox</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">        </span><span class="com">// for the next draw, use the texture we just rendered to.</span></li><li class=""><span class="pln">        gl</span><span class="pun">.</span><span class="pln">bindTexture</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">TEXTURE_2D</span><span class="pun">,</span><span class="pln"> textures</span><span class="pun">[</span><span class="pln">count </span><span class="pun">%</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">        </span><span class="com">// increment count so we use the other texture next time.</span></li><li class=""><span class="pln">        </span><span class="pun">++</span><span class="pln">count</span><span class="pun">;</span></li><li class=""><span class="pln">      </span><span class="pun">}</span></li><li class=""><span class="pln">    </span><span class="pun">}</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// finally draw the result to the canvas.</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform1f</span><span class="pun">(</span><span class="pln">flipYLocation</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln">  </span><span class="com">// need to y flip for canvas</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    setFramebuffer</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">canvas</span><span class="pun">.</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">canvas</span><span class="pun">.</span><span class="pln">height</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    drawWithKernel</span><span class="pun">(</span><span class="str">"normal"</span><span class="pun">);</span></li><li class=""><span class="pln">  </span><span class="pun">}</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="kwd">function</span><span class="pln"> setFramebuffer</span><span class="pun">(</span><span class="pln">fbo</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    </span><span class="com">// make this the framebuffer we are rendering to.</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">bindFramebuffer</span><span class="pun">(</span><span class="pln">gl</span><span class="pun">.</span><span class="pln">FRAMEBUFFER</span><span class="pun">,</span><span class="pln"> fbo</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Tell the shader the resolution of the framebuffer.</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform2f</span><span class="pun">(</span><span class="pln">resolutionLocation</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Tell WebGL how to convert from clip space to pixels</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">viewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">);</span></li><li class=""><span class="pln">  </span><span class="pun">}</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="kwd">function</span><span class="pln"> drawWithKernel</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">    </span><span class="com">// set the kernel and it's weight</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform1fv</span><span class="pun">(</span><span class="pln">kernelLocation</span><span class="pun">,</span><span class="pln"> kernels</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]);</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">uniform1f</span><span class="pun">(</span><span class="pln">kernelWeightLocation</span><span class="pun">,</span><span class="pln"> computeKernelWeight</span><span class="pun">(</span><span class="pln">kernels</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]));</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">    </span><span class="com">// Draw the rectangle.</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> primitiveType </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">TRIANGLES</span><span class="pun">;</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> offset </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class=""><span class="pln">    </span><span class="kwd">var</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span></li><li class=""><span class="pln">    gl</span><span class="pun">.</span><span class="pln">drawArrays</span><span class="pun">(</span><span class="pln">primitiveType</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">,</span><span class="pln"> count</span><span class="pun">);</span></li><li class=""><span class="pln">  </span><span class="pun">}</span></li></ul></pre>
        <p>Here's a working version with a slightly more flexible UI. Check the effects
          to turn them on. Drag the effects to reorder how they are applied.</p>
        <p>这是一个具有稍微更灵活的 UI 的工作版本。 检查效果以打开它们。 拖动效果以重新排列它们的应用方式。</p>
        <p></p>
        <div class="webgl_example_container">
          <iframe class="webgl_example" style=" " src="./WebGL2 Image Processing Continued_files/editor.html"></iframe>
          <a class="webgl_center" href="https://webgl2fundamentals.org/webgl/webgl-2d-image-processing.html"
            target="_blank">click here to open in a separate window</a>
        </div>

        <p></p>
        <p>Some things I should go over.</p>
        <p>Calling <code class="notranslate" translate="no">gl.bindFramebuffer</code> with <code class="notranslate"
            translate="no">null</code> tells WebGL you want to render
          to the canvas instead of to one of your framebuffers.</p>
        <p>使用 <code class="notranslate" translate="no">null</code> 调用 <code class="notranslate"
            translate="no">gl.bindFramebuffer</code> 告诉 WebGL 你想要渲染到画布而不是你的帧缓冲区之一。</p>
        <p>Also framebuffers may or may not work depending on which attachments you
          put on them. There's a list of which types and combinations of attachments
          are supposed to always work. The one used here, one <code class="notranslate" translate="no">RGBA</code>/<code
            class="notranslate" translate="no">UNSIGNED_BYTE</code> texture
          assigned to the <code class="notranslate" translate="no">COLOR_ATTACHMENT0</code> attachment point, is always
          supposed to work.
          More exotic texture formats and or combinations of attachments might not work.
          In that case you're supposed to bind the framebuffer and then call
          <code class="notranslate" translate="no">gl.checkFramebufferStatus</code> and see if it returns <code
            class="notranslate" translate="no">gl.FRAMEBUFFER_COMPLETE</code>.
          If it does you're good to go. If not you'll need to tell the user to fallback
          to something else. Fortunately WebGL2 supports many formats and combinations.
        </p>
        <p>此外，帧缓冲区可能会或可能不会工作，具体取决于您放置的附件。 有一个列表，其中列出了附件的类型和组合应该始终有效。 此处使用的一个 RGBA/UNSIGNED_BYTE 纹理分配给 COLOR_ATTACHMENT0
          附着点，应该始终有效。 更多奇特的纹理格式和/或附件组合可能不起作用。 在那种情况下，您应该绑定帧缓冲区，然后调用 gl.checkFramebufferStatus 并查看它是否返回
          gl.FRAMEBUFFER_COMPLETE。 如果是这样，你就可以走了。 如果不是，您需要告诉用户回退到其他东西。 幸运的是，WebGL2 支持多种格式和组合。</p>
        <p>WebGL has to convert from <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-fundamentals.html">clip
            space</a> back into pixels.
          It does this based on the settings of <code class="notranslate" translate="no">gl.viewport</code>. Since the
          framebuffers
          we are rendering into are a different size than the canvas we need to set the
          viewport appropriately depending if we are rendering to a texture or the canvas.</p>
        <p>WebGL 必须将剪辑空间转换回像素。 它根据 gl.viewport 的设置执行此操作。 由于我们渲染到的帧缓冲区与画布的大小不同，我们需要适当地设置视口，具体取决于我们是渲染到纹理还是画布。</p>
        <p>Finally in the <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-fundamentals.html">original
            example</a> we flipped the Y
          coordinate when rendering because WebGL displays the canvas with 0,0 being the
          bottom left corner instead of the more traditional for 2D top left. That's not
          needed when rendering to a framebuffer. Because the framebuffer is never
          displayed, which part is top and bottom is irrelevant. All that matters is
          that pixel 0,0 in the framebuffer corresponds to 0,0 in our calculations.
          To deal with this I made it possible to set whether to flip or not by
          adding one more uniform input into the shader call <code class="notranslate" translate="no">u_flipY</code>.
        </p>
        <p>最后，在原始示例中，我们在渲染时翻转了 Y 坐标，因为 WebGL 显示画布时 0,0 是左下角，而不是更传统的 2D 左上角。 渲染到帧缓冲区时不需要这样做。
          因为从不显示帧缓冲区，所以哪个部分是顶部和底部是无关紧要的。 重要的是帧缓冲区中的像素 0,0 对应于我们计算中的 0,0。 为了解决这个问题，我通过在着色器调用 u_flipY
          中添加一个统一的输入来设置是否翻转成为可能。</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pun">...</span></li><li class="lineadded"><span class="pln">uniform </span><span class="kwd">float</span><span class="pln"> u_flipY</span><span class="pun">;</span></li><li class=""><span class="pun">...</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="kwd">void</span><span class="pln"> main</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class=""><span class="pln">  </span><span class="pun">...</span></li><li class="lineadded"><span class="pln">   gl_Position </span><span class="pun">=</span><span class="pln"> vec4</span><span class="pun">(</span><span class="pln">clipSpace </span><span class="pun">*</span><span class="pln"> vec2</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> u_flipY</span><span class="pun">),</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class=""><span class="pln">  </span><span class="pun">...</span></li><li class=""><span class="pun">}</span></li></ul></pre>
        <p>And then we can set it when we render with</p>
        <p>然后我们可以在渲染时设置它</p>
        <pre class="prettyprint showlinemods prettyprinted"
          style=""><ul class="modifiedlines"><li class=""><span class="pln">  </span><span class="pun">...</span></li><li class="lineadded"><span class="pln">  </span><span class="kwd">var</span><span class="pln"> flipYLocation </span><span class="pun">=</span><span class="pln"> gl</span><span class="pun">.</span><span class="pln">getUniformLocation</span><span class="pun">(</span><span class="pln">program</span><span class="pun">,</span><span class="pln"> </span><span class="str">"u_flipY"</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="pun">...</span></li><li class=""><span class="pln">&nbsp;</span></li><li class="lineadded"><span class="pln">  </span><span class="com">// don't flip</span></li><li class="lineadded"><span class="pln">  gl</span><span class="pun">.</span><span class="pln">uniform1f</span><span class="pun">(</span><span class="pln">flipYLocation</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class=""><span class="pln">&nbsp;</span></li><li class=""><span class="pln">  </span><span class="pun">...</span></li><li class=""><span class="pln">&nbsp;</span></li><li class="lineadded"><span class="pln">  </span><span class="com">// flip</span></li><li class="lineadded"><span class="pln">  gl</span><span class="pun">.</span><span class="pln">uniform1f</span><span class="pun">(</span><span class="pln">flipYLocation</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span></li></ul></pre>
        <p>I kept this example simple by using a single GLSL program that can achieve
          multiple effects. If you wanted to do full on image processing you'd probably
          need many GLSL programs. A program for hue, saturation and luminance adjustment.
          Another for brightness and contrast. One for inverting, another for adjusting
          levels, etc. You'd need to change the code to switch GLSL programs and update
          the parameters for that particular program. I'd considered writing that example
          but it's an exercise best left to the reader because multiple GLSL programs each
          with their own parameter needs probably means some major refactoring to keep it
          all from becoming a big mess of spaghetti.</p>
        <p>我通过使用可以实现多种效果的单个 GLSL 程序来简化此示例。 如果您想进行全面的图像处理，您可能需要许多 GLSL 程序。 用于色调、饱和度和亮度调整的程序。 另一个用于亮度和对比度。
          一个用于反转，另一个用于调整电平等。您需要更改代码以切换 GLSL 程序并更新该特定程序的参数。 我考虑过编写该示例，但最好将其留给读者练习，因为每个都有自己的参数需要的多个 GLSL
          程序可能意味着一些重大的重构，以防止它变成一团乱七八糟的意大利面条。</p>
        <p>I hope this and the preceding examples have made WebGL seem a little more
          approachable and I hope starting with 2D helps make WebGL a little easier to
          understand. If I find the time I'll try to write <a
            href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-translation.html">a few more articles</a>
          about how to do 3D as well as more details on <a
            href="https://webgl2fundamentals.org/webgl/lessons/webgl-how-it-works.html">what WebGL is really doing under
            the hood</a>.
          For a next step consider learning <a
            href="https://webgl2fundamentals.org/webgl/lessons/webgl-2-textures.html">how to use 2 or more textures</a>.
        </p>
        <p>我希望这个例子和前面的例子让 WebGL 看起来更容易理解一点，我希望从 2D 开始有助于让 WebGL 更容易理解一点。 如果我有时间，我会尝试写更多关于如何做 3D 的文章，以及更多关于 WebGL
          在幕后真正做什么的细节。 下一步考虑学习如何使用 2 个或更多纹理。</p>

      </div>
      <div class="lesson-sidebar">
        <select class="language">
          <option value="/webgl/lessons/webgl-image-processing-continued.html" selected="">English
          </option>
          <option value="/webgl/lessons/de/webgl-image-processing-continued.html">Deutsch
          </option>
          <option value="/webgl/lessons/ja/webgl-image-processing-continued.html">日本語
          </option>
          <option value="/webgl/lessons/ko/webgl-image-processing-continued.html">한국어
          </option>
          <option value="/webgl/lessons/pt-br/webgl-image-processing-continued.html">Português Brasileiro
          </option>
          <option value="/webgl/lessons/zh_cn/webgl-image-processing-continued.html">简体中文
          </option>
        </select>


        <div id="toc">
          <ul>
            <li>Fundamentals</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-getting-webgl2.html">How to use WebGL2</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-fundamentals.html">Fundamentals</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-how-it-works.html">How It Works</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html">Shaders and
                  GLSL</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/resources/webgl-state-diagram.html">WebGL2 State
                  Diagram</a></li>
            </ul>
            <li>WebGL2 vs WebGL1</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl2-whats-new.html">What's new in WebGL2</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl1-to-webgl2.html">Moving from WebGL1 to
                  WebGL2</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl1-to-webgl2-fundamentals.html">Differences
                  from WebGLFundamentals.org to WebGL2Fundamentals.org</a></li>
            </ul>
            <li>Image Processing</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing.html">Image
                  Processing</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-image-processing-continued.html">Image
                  Processing Continued</a></li>
            </ul>
            <li>2D translation, rotation, scale, matrix math</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-translation.html">2D Translation</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-rotation.html">2D Rotation</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-scale.html">2D Scale</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-matrices.html">2D Matrices</a></li>
            </ul>
            <li>3D</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-orthographic.html">Orthographic 3D</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-perspective.html">3D Perspective</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-camera.html">3D - Cameras</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-matrix-naming.html">3D - Matrix Naming</a>
              </li>
            </ul>
            <li>Lighting</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-lighting-directional.html">Directional
                  Lighting</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-lighting-point.html">Point Lighting</a>
              </li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-lighting-spot.html">Spot Lighting</a>
              </li>
            </ul>
            <li>Structure and Organization</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-less-code-more-fun.html">Less Code, More
                  Fun</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-drawing-multiple-things.html">Drawing
                  Multiple Things</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-scene-graph.html">Scene Graphs</a></li>
            </ul>
            <li>Geometry</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-geometry-lathe.html">3D Geometry -
                  Lathe</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-load-obj.html">Loading .obj files</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-load-obj-w-mtl.html">Loading .obj w .mtl
                  files</a></li>
            </ul>
            <li>Textures</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-textures.html">Textures</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-data-textures.html">Data Textures</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2-textures.html">Using 2 or More
                  Textures</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-cors-permission.html">Cross Origin
                  Images</a></li>
              <li><a
                  href="https://webgl2fundamentals.org/webgl/lessons/webgl-3d-perspective-correct-texturemapping.html">Perspective
                  Correct Texture Mapping</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-planar-projection-mapping.html">Planar and
                  Perspective Projection Mapping</a></li>
            </ul>
            <li>Rendering To A Texture</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-render-to-texture.html">Render to
                  Texture</a></li>
            </ul>
            <li>Shadows</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-shadows.html">Shadows</a></li>
            </ul>
            <li>Techniques</li>
            <ul>
              <li>2D</li>
              <ul>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-drawimage.html">2D - DrawImage</a>
                </li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-matrix-stack.html">2D - Matrix
                    Stack</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-sprites.html">Sprites</a></li>
              </ul>
              <li>3D</li>
              <ul>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-cube-maps.html">Cubemaps</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-environment-maps.html">Environment
                    maps</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-skybox.html">Skyboxes</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-skinning.html">Skinning</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-fog.html">Fog</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-picking.html">Picking (clicking on
                    stuff)</a></li>
              </ul>
              <li>Text</li>
              <ul>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-text-html.html">Text - HTML</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-text-canvas2d.html">Text - Canvas 2D</a>
                </li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-text-texture.html">Text - Using a
                    Texture</a></li>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-text-glyphs.html">Text - Using a Glyph
                    Texture</a></li>
              </ul>
              <li>GPGPU</li>
              <ul>
                <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-gpgpu.html">GPGPU</a></li>
              </ul>
            </ul>
            <li>Tips</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-smallest-programs.html">Smallest
                  Programs</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-drawing-without-data.html">Drawing Without
                  Data</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-shadertoy.html">Shadertoy</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-pulling-vertices.html">Pulling
                  Vertices</a></li>
            </ul>
            <li>Optimization</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-indexed-vertices.html">Indexed Vertices
                  (gl.drawElements)</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-instanced-drawing.html">Instanced
                  Drawing</a></li>
            </ul>
            <li>Misc</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-setup-and-installation.html">Setup And
                  Installation</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-boilerplate.html">Boilerplate</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html">Resizing the
                  Canvas</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-animation.html">Animation</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-points-lines-triangles.html">Points,
                  Lines, and Triangles</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-multiple-views.html">Multiple Views,
                  Multiple Canvases</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-visualizing-the-camera.html">Visualizing
                  the Camera</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-and-alpha.html">WebGL2 and Alpha</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-2d-vs-3d-library.html">2D vs 3D
                  libraries</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-anti-patterns.html">Anti-Patterns</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-matrix-vs-math.html">WebGL2 Matrices vs
                  Math Matrices</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-precision-issues.html">Precision
                  Issues</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-tips.html#screenshot">Taking a
                  screenshot</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-tips.html#preservedrawingbuffer">Prevent
                  the Canvas Being Cleared</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-tips.html#tabindex">Get Keyboard Input
                  From a Canvas</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-tips.html#html-background">Use WebGL2 as
                  Background in HTML</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-cross-platform-issues.html">Cross Platform
                  Issues</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-qna.html">Questions and Answers</a></li>
            </ul>
            <li>Reference</li>
            <ul>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-attributes.html">Attributes</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-texture-units.html">Texture Units</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-framebuffers.html">Framebuffers</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-readpixels.html">readPixels</a></li>
              <li><a href="https://webgl2fundamentals.org/webgl/lessons/webgl-references.html">References</a></li>
            </ul>
          </ul>
          <ul>
            <li><a href="https://webgl2fundamentals.org/docs/">Helper API Docs</a></li>
            <li><a href="https://twgljs.org/">TWGL, A tiny WebGL helper library</a></li>
            <li><a href="https://github.com/gfxfundamentals/webgl2-fundamentals">github</a></li>
          </ul>
        </div>
      </div>
      <div class="lesson-comments">

        <div>Issue/Bug? <a href="https://github.com/gfxfundamentals/webgl2-fundamentals/issues">Create an issue on
            github</a>.</div>
        <div class="lesson-comment-notes">
          Use <b>&lt;pre&gt;&lt;code&gt;</b>code goes here<b>&lt;/code&gt;&lt;/pre&gt;</b> for code blocks
        </div>


        <div id="disqus_thread"></div>
        <script>
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'webgl2fundamentals'; // required: replace example with your forum shortname
          var disqus_identifier = 'WebGL2 Image Processing Continued';
          var disqus_title = 'WebGL2 Image Processing Continued';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function () {
            if (window.location.hostname.indexOf("webgl2fundamentals.org") < 0) {
              return;
            }
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
  </div>

  <script>
    const settings = {
      contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
      owner: "gfxfundamentals",
      repo: "webgl2-fundamentals",
    };
  </script>
  <script src="./WebGL2 Image Processing Continued_files/contributors.js.下载"></script>
  <script src="./WebGL2 Image Processing Continued_files/jquery-1.11.2.min.js.下载"></script>
  <script src="./WebGL2 Image Processing Continued_files/prettify.js.下载"></script>
  <script src="./WebGL2 Image Processing Continued_files/lesson.js.下载" type="module"></script>
  <script>
    (function () {
      if (window.location.hostname.indexOf("webgl2fundamentals.org") < 0) {
        return;
      }

      function addScript(src, type, fn) {
        const script = document.createElement('script');
        const firstScript = document.getElementsByTagName('script')[0];
        script.async = true;
        script.defer = true;
        script.type = type || 'javascript';
        if (fn) {
          script.addEventListener('load', fn);
        }
        script.src = src;
        firstScript.parentNode.insertBefore(script, firstScript);
      }

      // can't do this because it would eat contexts
      //addScript('//gpustats.org/stats.js', 'module');

      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-90754717-1', 'auto');
      ga('send', 'pageview');
    }());
  </script>






</body>

</html>